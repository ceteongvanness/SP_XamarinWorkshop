## Hands-on Lab - Earth Explorer
In this hands-on lab, we will be building a Xamarin application that will display a list of interest locations and its location on a map. This app will target iOS and Android.

##### Get Started
1. Open **Visual Studio 2017**
2. Go to **File** > **New** > **Project**
3. Navigate to **Other Project Types** > **Visual Studio Solutions** and create a **Blank Solution** called **EarthExplorer**
4. We are going to add 3 projects into this solution.
5. In the **Solution Explorer**, **right click** on **Earth Explorer** > **Add** > **New Project**
6. Navigate to **Visual C#** > **.NET Standard** > **Class Library (.NET Standard)**
7. Name this project **EarthExplorer.Core** and click **OK**
8. In the Solution Explorer right click on **Earth Explorer** > **Add** > **New Project**
9. Navigate to **Visual C#** > **Android** > **Android App (Xamarin)**
10. Name this project **EarthExplorer.Droid** and click **OK**
11. Select **Blank App** and click **OK**
12. Add another project by going to the Solution Explorer. **Right click** on **EarthExplorer** > **Add** > **New Project**
13. Navigate to **Visual C#** > **iPhone & iPad** > **iOS App (Xamarin)**
14. Name this project **EarthExplorer.iOS** and click **OK**
15. Select **Single View App** and click **OK**

You should see a solution that contains 3 projects as such:

* EarthExplorer.Core - Portable Class Library that will have all shared code (model, views, and view models).
*  EarcthExplorer.Droid - Xamarin. Droid application
*  EarthExplorer.iOS - Xamarin.iOS application

##### Building the shared logic
In the **EarthExplorer (Portable)** project, a default class **MyClass** has been created.

Open the class, delete **everything**, and use this code

In the **solution explorer**, rename **MyClass.cs** to **PointOfInterest.cs** as a form of good practice

We're now done with our business logic!

#### EarthExplorer.Android
We.re now going to implement the functionality for the Android app
1. Right click on **EarthExplorer.Android** and select **Select as Starup project**
2. Right click on **References** > **Add Reference**
3. Check **EarthExplorer.Core** and click **OK**
4. In the **soultion explorer**, go to **EarthExlprer.Android** > **Resources** > **layout** and open **activity_main.axml**
5. Go to **View** >  **Toolbox**
6. In the **Toolbox**, search for the **ListView** control, and drag it onto the Android designer
7. Click on **File** > **Save** all to save changes

##### Implementing the Activity
8. In the **Solution Explorer** open **MainActivity.cs**
9. At the top of teh file, replace all using statements with the following
10. Within the class, declare a list of **PointOfInterest**
11. Initialise, and wire up the list view such that your **OnCreate** method looks like this
12. Since there's awaitable code here, change the method signature of **OnCreate** from

	to
    
13. Now, let's implement the **ItemClick** handler of the **ListView**

##### Create the adapter class
In Android, an Adapter object acts as a bridge between an AdapterView and the underlying data for that view. The Adapter provides access to the data items. The Adapter is also responsible for making a View for each item in the data set

14. Let's add a new class by **right clicking** on the the **EarthExplorer.Droid** project, go to **Add** and select **class**
15. Create a new class **POIAdapter.cs**
16. Delete everything in the file and replace it with
17. Save the changes made to **POIAdapter.cs** by going to **File** > **Save all**

##### Configure the app for build and deployment
18. Right click on the main **Solution** and select **Properties**
19. Navigate to **Configuration Properties** > **Configuration**
20. Ensure that **Build** and **Deploy** is checked against **EarthExplorer.Droid**

##### Running the app
You can run the app in the android emulator by click on the green arrow with the following settings

#### EarthExplorer.iOS
1. Right click on the **EarthExplorer.iOS** project and select **Set as StartUp Project**
2. Add the **EarthExplorer.Core** project as a reference (refer to step 2 & 3 in the Android section, except right click on the **references** item under **EarthExplorer.iOS**
3. Right click on the main solution **EarthExplorer** project and select **Properties**
4. Uncheck **Build** and **Deploy** for Android and select **Build** for EarthExplorer.iOS. 
5. Click **OK**
6. In the **Solution Explorer, open **Main.storyboard**
7. Delete the **Hello World, Click Me!** button
8. From the Toolbox, drag a **Map View** and **Table View** control onto the storyboard, and set their constraints
9. Set the name of the controls to **MyMap** and **MyTable** respectively in the **Properties** windows

##### Viewing controls from the document outline windows
10. Go to **View** > **Other Windows** > **Document outline**
11. Remove the nested **Table Cell** from the **Table View** until you see the following view:

##### Creating the TableSource class
12. Right click on the **EarthExplorer.iOS** project > **Add** > **Add New Item** > **Class**
13. Set the name as **TableSource.cs** and clik **Add**

**TableSource.cs**

**Open ViewController.cs**

14. Remove the code related to the Button control that was deleted and add the following snippet in the **ViewDidLoad** method

Remember to mark the method as **async**

**Implementing the OnClick event handler**

Import the following namespace

**Implementing the Location manager**

Implement the LocationManager within **ViewDidLoad**. The method should now look like this

Declare the following members at the class level

**Implement the LocationUpdated event handler**

**Modify the plist to allow locations to be used**

In the **Solution Explorer**, right click on **Info.plist** > **Open With** > **XML (Text) Editor**

Add the following snippet right before 

##### Build and run the app






 
